# Xtower-Plugin

Xtower-Plugin 是一个原有的 JS 功能集成 Plugin，包括了随机歌词与聪明 Bingo 功能，后续可能会继续添加。

## 安装

在 Yunzai 目录下运行：

> 使用Github

```
#安装插件本体
git clone --depth=1 https://github.com/Sczr0/Xtower-Plugin.git ./plugins/Xtower-Plugin/ 
#进入插件目录
cd ./plugins/Xtower-Plugin/ 
#安装插件所需依赖
pnpm install -P
```
> [!TIP]
> 如果安装依赖时速度过慢，运行：
> 
>```
> pnpm config set registry https://registry.npmmirror.com
>```

## 功能

### 随机歌词

在使用这个功能之前，你需要至少有一个 git 歌词存储库，否则该功能不会正常工作。

歌词需要以 txt 格式存储，并建议去除歌手信息（除非你想抽歌词的时候抽出来这东西）（划掉）

如果一个歌词 txt 没有空行，使用抽歌词并选中该 txt 时，会随机发送一行

如果有，则会按照空行进行分段，并随机发送一段

具体分段的歌词可以参考：[yllyrics](https://github.com/Sczr0/yllyrics)

#### **以下为用户功能**

| **功能名称**               | **功能说明**                                                                 |
|----------------------------|-----------------------------------------------------------------------------|
| 抽歌词 [-riv]              | 随机抽取一条歌词（添加 `-riv` 去除输出中的歌手信息）                        |
| 抽歌词 <数量> [-riv]       | 批量抽取指定数量的歌词（添加 `-riv` 去除输出中的歌手信息）                  |

#### **以下为管理功能**

| **功能名称**               | **功能说明**                                                                 |
|----------------------------|-----------------------------------------------------------------------------|
| 获取歌词 <库名> <仓库名>   | 从指定仓库获取歌词                                                          |
| 新建歌词仓库 <名称> <URL>  | 添加新的歌词仓库                                                            |
| 删除歌词仓库 <名称>        | 删除指定歌词仓库                                                            |
| 新建歌词库 <名称>          | 创建新的歌词库                                                              |
| 删除歌词库 <名称>          | 删除指定歌词库                                                              |
| 关联群组 <群号> <歌词库名> | 将群组与歌词库关联                                                          |
| 歌词库列表                 | 列出所有歌词库                                                              |
| 仓库列表                   | 列出所有歌词仓库                                                            |
| 设置频率限制 <次数> <冷却秒数> | 设置抽歌词频率限制                                                      |
| 更新公用库 <仓库名>        | 更新公用歌词库     

### 聪明 Bingo

这是一个 bingo 游戏实现，原游戏为聪明 Bingo，游戏需要找到一个可以五连勾同时满足所有格子要求的解。

#### 可用指令

| **指令格式**           | **功能描述**                                                                 |
|------------------------|-----------------------------------------------------------------------------|
| #今日bingo             | 获取今日题目                                                                |
| #bingo xx xx xx ...    | 提交题目答案，其中 `xx` 的第1个数代表行，第2个数代表列，比如 `13` 代表第一行第三列 |
| #查询Bingo排名         | 查询当前排名       