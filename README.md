# Xtower-Plugin

<p align="center">
  <a href="https://github.com/Sczr0/Xtower-Plugin">
    <img src="https://img.shields.io/github/last-commit/Sczr0/Xtower-Plugin?style=flat-square&logo=github&label=最后更新" alt="最后更新">
  </a>
  <a href="https://github.com/Sczr0/Xtower-Plugin/issues">
    <img src="https://img.shields.io/github/issues/Sczr0/Xtower-Plugin?style=flat-square&logo=github&label=Issues" alt="Issues">
  </a>
  <a href="https://github.com/Sczr0/Yunzai-Bot">
    <img src="https://img.shields.io/badge/Yunzai--Bot-v3-blue?style=flat-square&logo=appveyor" alt="Yunzai-Bot">
  </a>
  <img src="https://img.shields.io/badge/License-BSD--3--Clause-blue?style=flat-square" alt="License">
</p>

![:动态访问量](https://count.kjchmc.cn/get/@:xtower-plugin)

一个多功能插件，集成了多种功能。

### 功能一览

- **随机歌词**
- **聪明 Bingo**
- **俄罗斯转盘**
- **自定义速算**
- **24点**
- **谁是卧底 (测试)**
- **狼人杀 (测试)**

---

## 📖 目录

- [安装](#-安装)
- [功能介绍](#-功能介绍)
  - [帮助指令](#-帮助指令)
  - [随机歌词](#-随机歌词)
  - [聪明 Bingo](#-聪明-bingo)
  - [自定义速算](#-自定义速算)
  - [俄罗斯转盘](#-俄罗斯转盘)
  - [24点](#-24点)
- [测试功能](#-测试功能)
  - [谁是卧底](#-谁是卧底测试)
  - [狼人杀](#-狼人杀测试)
- [贡献](#-贡献)
- [许可证](#-许可证)

---

## 🚀 安装


在 Yunzai 根目录下，打开终端并执行以下指令：

**1. 选择一个源进行克隆：**

<details>
<summary><b>① (推荐) 使用 Github</b></summary>

```bash
git clone --depth=1 https://github.com/Sczr0/Xtower-Plugin.git ./plugins/Xtower-Plugin/
```

</details>

<details>
<summary><b>② (国内) 使用 Gitee</b></summary>

```bash
git clone --depth=1 https://gitee.com/sczr/Xtower-Plugin.git ./plugins/Xtower-Plugin/
```

</details>

<details>
<summary><b>③ (备用) 使用 Gitcode</b></summary>

```bash
git clone --depth=1 https://gitcode.com/Sczr0/Xtower-Plugin.git ./plugins/Xtower-Plugin/
```

</details>

**2. 安装依赖：**

```bash
cd ./plugins/Xtower-Plugin/
pnpm install -P
```

> [!TIP]
> 如果安装依赖时速度过慢：
> `pnpm config set registry https://registry.npmmirror.com`

---

## 🎮 功能介绍

### 📝 帮助指令
本插件内置了简单的文字版指令说明，可通过 **`#弦塔帮助`** 查看。

### 🎵 随机歌词

一个高度可定制的随机文本（歌词）抽取功能。

> [!NOTE]
> **一键快速配置**
> 
> 如果你不想进行复杂的配置，可以直接复制并发送以下两条指令给机器人，以使用作者提供的默认歌词库：
> ```
> #新建歌词仓库 bingo https://gitcode.com/Sczr0/bingolyrics.git
> #更新公用库 bingo
> ```

#### 用户指令
| 指令 | 说明 |
| :--- | :--- |
| **抽歌词** `[数量]` `[-riv]` | 随机抽取一条或多条歌词。<br>• `数量`：可选，指定抽取的条数。<br>• `-riv`：可选，在结果中隐藏歌曲来源信息。 |

#### 管理员配置指令
<details>
<summary>点击展开/折叠详细配置指令</summary>

| 指令 | 说明 |
| :--- | :--- |
| **#新建歌词仓库** `<名称> <Git URL>` | 添加一个新的 Git 仓库源。 |
| **#删除歌词仓库** `<名称>` | 删除一个已添加的 Git 仓库源。 |
| **#仓库列表** | 查看所有已添加的 Git 仓库源。 |
| **#新建歌词库** `<名称>` | 创建一个新的歌词库，用于分类管理歌词。 |
| **#删除歌词库** `<名称>` | 删除一个歌词库。 |
| **#歌词库列表** | 查看所有已创建的歌词库。 |
| **#获取歌词** `<库名> <仓库名>` | 从指定仓库拉取歌词，并覆盖到指定的歌词库中。 |
| **#更新公用库** `<仓库名>` | 将指定仓库的歌词更新到“公用库”。未特殊关联的群聊和私聊将默认使用此库。 |
| **#关联群组** `<群号> <歌词库名>` | 将指定群聊与一个歌词库绑定，该群抽歌词时将只使用此库。 |
| **#设置频率限制** `<次数> <秒数>` | 设置抽歌词的频率限制，防止刷屏。 |

</details>

### 聪明 Bingo

一个需要找到五子连线，并同时满足所有格子要求的解谜游戏。

| 指令 | 说明 |
| :--- | :--- |
| **#今日bingo** | 获取当天的 Bingo 题目。 |
| **#bingo** `xx xx ...` | 提交答案。`xx` 代表坐标，如 `13` 表示第1行第3列。 |
| **#查询Bingo排名** | 查看自己的提交排名及今日速度榜前三。 |

### 自定义速算

一个可自定义难度的速算小游戏，分为普通模式和无尽模式。

| 指令 | 说明 |
| :--- | :--- |
| **#速算**`[难度]` | 开始一次速算挑战。<br>难度可选：`简单`、`普通`、`困难`、`地狱`。默认为`简单`。 |
| **#无尽速算**`[难度]` | 开始无尽模式，连续答题，挑战高分。 |
| **#放弃** | 结束当前游戏并查看答案。 |

### 俄罗斯转盘

一场惊险刺激的运气对决，活到最后即是赢家。

| 指令 | 说明 |
| :--- | :--- |
| **#俄罗斯转盘**`[子弹数]` | 发起游戏。子弹数可选 `1-5`，默认为 `1`。 |
| **#加入转盘** / **#加入轮盘** | 加入等待中的游戏。 |
| **#退出转盘** | 在游戏开始前退出。 |
| **#开始转盘** | 由房主提前开始游戏。 |
| **#开枪** | 轮到你时，对自己扣下扳机。 |
| **#结束转盘** / **#结束轮盘** | 由房主或管理员强制结束游戏。 |

### 24点（测试）

运用加减乘除，括号将四个数字凑成24

| 指令 | 说明 |
| :--- | :--- |
| **#24点** | 发起一局新游戏。 |
| **发送算式** | 直接发送你的数学算式来回答当前题目。例：`(8-2)*4` |
| **#求解** `[数字]` | 求解指定的数字组合能否算出24。例：`#求解 3 3 8 8` |
| **#答案** | 查看当前题目的参考答案，并结束本局游戏。 |
| **#结束24点** | 主动放弃并结束当前正在进行的游戏。 |
| **#24点帮助** | 显示帮助菜单。 |

---

## 🛠️ 测试功能

> [!WARNING]
> 以下功能目前处于**早期测试阶段**，可能存在大量影响游戏体验的 Bug。我们欢迎你通过 [Github Issues](https://github.com/Sczr0/Xtower-Plugin/issues) 反馈问题，但相关 Bug 的修复优先级会稍低（其他平台的Issues优先级一般更低），敬请谅解。

### 🕵️ 谁是卧底（测试）

这是一个“谁是卧底”的游戏实现，玩家分为平民和卧底两种身份，通过发言和投票找出卧底或隐藏身份。

#### 游戏规则
- **人数要求**：至少3人才能开始。
- **核心玩法**：平民会获得相同的词语，卧底会获得一个与平民词语相似的词语。
- **流程**：玩家轮流发言描述自己的词语（不能直接说出词语），发言结束后投票选出最可疑的玩家。
- **游戏目标**：
  - **平民**：找出并淘汰所有卧底。
  - **卧底**：隐藏身份活到最后。

#### 可用指令
| 指令格式 | 功能描述 |
| :--- | :--- |
| **#卧底创建** `[明牌/暗牌]` | 创建游戏房间，可选明牌或暗牌模式，默认为暗牌。 |
| **#加入卧底** | 加入已创建的游戏。 |
| **#退出卧底** | 退出等待中的游戏（房主退出将解散游戏）。 |
| **#开始卧底** | 由房主开始游戏。 |
| **#结束发言** / **#发言结束** | 当前发言玩家结束自己的发言回合。 |
| **#投票** `[编号]` | 投票淘汰指定编号的玩家（如 `#投票 01`）。 |
| **#结束卧底** | 由房主强制结束进行中的游戏。 |

### 🐺 狼人杀（测试）

这是一个狼人杀游戏的实现。玩家将被分为狼人、村民和神民阵营，通过夜晚行动、白天发言和投票来淘汰对立阵营。

#### 游戏规则
- **人数要求**：至少6名玩家才能开始。
- **角色分配**：玩家会被分配不同角色：狼人、村民、预言家、女巫、猎人、守卫。
- **游戏流程**：
  - **夜晚**：
    - 狼人选择击杀目标。
    - 预言家查验玩家身份。
    - 守卫选择守护一名玩家（不能连续两晚守护同一个人）。
    - 女巫可使用解药或毒药（各一次）。
  - **白天**：
    - 公布昨晚死讯。
    - 猎人死亡时可开枪带走一人。
    - 存活玩家轮流发言。
    - 发言结束后，所有存活玩家投票放逐一人。
- **胜利条件**：
  - **狼人阵营**：狼人数量大于等于存活的好人（村民+神民）数量（屠城）。
  - **好人阵营**：淘汰所有狼人。

#### 可用指令
| 指令格式 | 功能描述 |
| :--- | :--- |
| **#创建狼人杀** | 创建一局新的狼人杀游戏。 |
| **#加入狼人杀** | 加入等待中的游戏。 |
| **#退出狼人杀** | 退出等待中的游戏。 |
| **#开始狼人杀** | 由房主开始游戏。 |
| **#结束发言** / **#发言结束** | 结束自己的发言回合。 |
| **#投票** `[编号]` | 投票淘汰指定编号的玩家。 |
| **#狼人杀状态** | 查看当前游戏状态。 |
| **#结束狼人杀** | 由房主或管理员强制结束游戏。 |

**(私聊机器人指令)**
- `杀 [编号]`：狼人夜晚击杀。
- `查验 [编号]`：预言家夜晚查验。
- `救 [编号]` / `毒 [编号]`：女巫使用药剂。
- `守 [编号]`：守卫夜晚守护。
- `开枪 [编号]`：猎人死亡后开枪。

---

## ❤️ 贡献

- **提交 Bug 或建议**：通过 [GitHub Issues](https://github.com/Sczr0/Xtower-Plugin/issues) 提交你的反馈。

## 📜 许可证

本项目使用 BSD-3-Clause 开源。

---